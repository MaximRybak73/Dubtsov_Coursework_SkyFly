<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaxFly Airlines - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">‚úàÔ∏è MaxFly Airlines</div>
            <div class="nav-links">
                <a href="index.html" id="navHome"
                    style="background-color: #f9f9f9; padding: 0.5rem 1rem; border-radius: 5px;">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="login.html" id="navLogin"
                    style="background-color: #f9f9f9; padding: 0.5rem 1rem; border-radius: 5px;">–í—Ö–æ–¥</a>
                <a href="register.html" id="navRegister"
                    style="background-color: #f9f9f9; padding: 0.5rem 1rem; border-radius: 5px;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                <a href="profile.html" id="navProfile"
                    style="display: none; background-color: #ffffff; padding: 0.5rem 1rem; border-radius: 5px;">üë§
                    –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                <a href="#" id="navLogout" onclick="logoutPassenger(); return false;"
                    style="display: none; color: #ff6b6b; background-color: #ffffff; padding: 0.5rem 1rem; border-radius: 5px;">–í—ã—Ö–æ–¥</a>
            </div>
        </div>
    </nav>

    <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="container">
        <div class="profile-section">
            <h2>–ú–æ–π –∫–∞–±–∏–Ω–µ—Ç</h2>

            <div class="user-info" id="userInfo">
                <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</h3>
                <p id="userDetails">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>

            <div class="bookings-section">
                <h3>–ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
                <div class="bookings-list" id="bookingsList">
                    <p style="text-align: center; color: #999;">–£ –≤–∞—Å –Ω–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</p>
                </div>
            </div>

            <button class="btn btn-primary" onclick="window.location.href='index.html'">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</button>
        </div>
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer">
        <p>&copy; 2024 MaxFly Airlines. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>

    <script src="php_database.js"></script>
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        document.addEventListener('DOMContentLoaded', function () {
            if (!isUserLoggedIn()) {
                alert('‚ùå –í—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã!');
                window.location.href = 'login.html';
                return;
            }

            updateNavigation();
            highlightActiveLink();
            displayUserInfo();
        });

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function displayUserInfo() {
            const passenger = getCurrentPassenger();

            if (passenger) {
                const userDetails = document.getElementById('userDetails');
                userDetails.innerHTML = `
                    <strong>–ò–º—è:</strong> ${passenger.FirstName} ${passenger.LastName}<br>
                    <strong>Email:</strong> ${passenger.Email}<br>
                    <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${passenger.PhoneNumber || '–ù–µ —É–∫–∞–∑–∞–Ω'}<br>
                    <strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> ${passenger.DateOfBirth || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}
                `;
            }
        }

        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–π —Å—Å—ã–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        function highlightActiveLink() {
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const navLinks = document.querySelectorAll('.nav-links a');

            navLinks.forEach(link => {
                const href = link.getAttribute('href');

                if (href === currentPage || (currentPage === '' && href === 'index.html')) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }
    </script>
</body>

</html>